<h1 class="text-2xl font-bold mb-6 text-center">Disponibilidades de Usuarios</h1>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  <% @availabilities_by_user.each do |user| %>
    <div class="border rounded p-4 bg-white shadow relative">
      <div class="flex justify-between items-start mb-2">
        <h2 class="text-lg font-semibold text-gray-800">
          <%= user.name %> (<%= user.role %>)
        </h2>

    <%= button_to "🗑️", 
      user_availabilities_path(user), 
      method: :delete, 
      form: { data: { turbo_confirm: "¿Estás seguro de eliminar todas las disponibilidades de #{user.name}?" } },
      class: "text-red-500 hover:text-red-700 text-xl font-bold px-2 py-1 rounded-md transition" %>
   </div>

      <% user.availabilities.order(:day).each do |a| %>
        <p class="text-gray-700 text-sm">
          <strong><%= Date::DAYNAMES[a.day] %>:</strong>
          <%= a.start_time.strftime("%H:%M") %> - <%= a.end_time.strftime("%H:%M") %>
        </p>
      <% end %>

      <p class="text-gray-500 text-xs mt-2">
        Enviado el: <%= user.availabilities.first.created_at.strftime("%d/%m/%Y %H:%M") %>
      </p>
    </div>
  <% end %>
</div>
